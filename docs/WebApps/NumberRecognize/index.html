<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" lang="en">
        <title>Number recognizer</title>
        <link rel="stylesheet" type="text/css" href="../common/common.css">
        <link rel="stylesheet" type="text/css" href="main.css">
    </head>

    <body>

        <div class="headingBackground">
            <p class="text heading">Hand-drawn digit recognizer</h2>
        </div>

        
        <div class="flex-container main">
            <canvas id="drawCanvasSmall" class="canvas hidecanvas" width="28" height="28" style="border:1px solid #d3d3d3;"> Your browser does not support the HTML5 canvas tag.</canvas>
            <canvas id="drawCanvas" class="canvas" width="300" height="300" style="border:1px solid #d3d3d3;"> Your browser does not support the HTML5 canvas tag.</canvas>
            <div class="flex-container controls" width="300" height="200">
                <button type="button" class="networkbtn" onclick="clearImage()">Clear</button>
                <button type="button" class="networkbtn" onclick="calculateNetwork('lblResult', 'lblResultCoM', 'lblResultDetails')">What did I draw?</button>
            </div>
            <p id="lblResult" class="text">Draw a number from 0 to 9!</p>
        </div>

        
        <div class="textblock">
            <p class="details" onclick="toggleDetails()" onmouseover="this.style.color='#ffff00';" onmouseout="this.style.color='#ffcc00';"> Details</p>
            <div  id="expandable" class="detailsExpand" >
                <p class="textcontent">
                    This is a trained neural network recognizing your hand-writing. Draw a number between 0 and 9 and
                    see if the network guessed it right!
                </p>
                <p class="textcontent">
                    In the background there is a neural network that was trained on the <a href="http://yann.lecun.com/exdb/mnist/">MNIST dataset</a>. The dataset consists of
                    60 000 + 10 000 images of hand-written numbers. All images have a size of 28x28 pixels, and an associated label that 
                    tells which number is supposed to be drawn on the image.
                </p>
                
                <img class="content small" src="MnistExamples.png">
                </img>

                <p class="textcontent">
                    The MNIST dataset contains the images pre-processed, so that each image is centered inside the 28x28
                    pixel region using its center of mass. To make sure that the network receives similiar inputs that it
                    has learned on, your input is also centered using your drawings center of mass:
                </p>

                <p id="lblResultCoM" class="text small important">-</p>

                <p class="textcontent">
                    In this demo app there are actually 4 networks that were trained using this dataset, and once you draw a number
                    all of them will take a vote. The number that most of the networks voted for gets picked as the result.
                    You can see the result of the last voting here:
                </p>

                <p id="lblResultDetails" class="text small important">-</p>
            </div>
        </div>

        <div id="loading" class="loadingbackground">
            <p class="loadingtext">Loading networks...</h2>
        </div>

        <script src="../common/neuralnet.js"> </script>
        <script src="drawing.js"> </script>
        
        <script>
            var isDetailExpanded = false;

            function toggleDetails(){
                isDetailExpanded=!isDetailExpanded; 
                let expandable = document.getElementById('expandable');
                expandable.style.display = isDetailExpanded ? "block" : "none";
            }
            expandable.style.display = isDetailExpanded ? "block" : "none";

            document.getElementById("loading").hidden=true;
        </script>

    </body>
</html>
